{"version":3,"sources":["app.js","environment.js","index.js","main.js","utility.js","web-api.js","pages/gmail.js","pages/lookup.js","pages/registration.js","pages/reports.js","pages/settings.js","pages/splash.js","services/auth-service.js","services/authorize-step.js","resources/index.js","components/nav/bottom-nav.js","components/nav/top-nav.js","model/events/attendee-updated.js","model/events/check-in.js","model/events/recipients-updated.js","model/events/setting-updated.js","model/events/settings-updated.js","resources/elements/loading-indicator.js","resources/renderers/alt-bootstrap-form-renderer.js","resources/renderers/bootstrap-form-renderer.js","resources/value-converters/auth-filter-value-converter.js","resources/value-converters/date-format-value-converter.js","resources/value-converters/keys-value-converter.js","bootstrap.scss"],"names":["App","authService","webApi","configureRouter","config","router","title","map","route","moduleId","name","auth","isAuthenticated","debug","testing","Index","message","created","configure","Promise","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","plugin","developmentLogging","start","then","setRoot","areEqual","clone","obj1","obj2","Object","keys","every","key","hasOwnProperty","obj","JSON","parse","stringify","latency","id","localStorage","getItem","getId","next","setItem","navItems","menuItems","icon","showTitle","settings","console","log","trim","attendees","checkIns","recipients","delay","data","isRequesting","setTimeout","resolve","save","value","values","instance","found","find","x","index","indexOf","push","WebAPI","eventAggregator","subscribe","attendeeId","event","attendee","date","Date","getNavItems","getMenuItems","getAttendees","getAttendeesByLastName","lastName","filter","getAttendeeById","saveAttendee","publish","getCheckIns","saveCheckIn","deleteCheckIns","removeItem","getSettings","saveSettings","_settings","getRecipients","saveRecipients","_recipients","CLIENT_ID","DISCOVERY_DOCS","SCOPES","Gmail","isSignedIn","messages","handleClientLoad","gapi","load","initClient","bind","client","init","discoveryDocs","clientId","scope","auth2","getAuthInstance","listen","updateSigninStatus","get","listLabels","handleAuthClick","signIn","handleSignoutClick","signOut","appendPre","gmail","users","labels","list","response","result","length","i","label","Lookup","showAttendees","submit","reset","Registration","of","controller","validateTrigger","blur","addRenderer","rules","ensure","required","email","displayName","minLength","matches","withMessage","when","referred","activate","params","checkIn","validate","valid","submitSuccess","lastAttendedDate","toDateString","paid","associate","member","nextPaymentDate","attendance","navigate","detached","ONE_DAY_MILLIS","Reports","setPaid","numDays","getTime","_split","s","split","_join","ar","today","format","getStatus","getPaymentStatus","formatMessage","templateKey","signature","template","replace","firstName","Settings","accessToken","test","recipient","addRecipient","deleteRecipient","p1","p2","_recipient","join","findAttendee","sendAll","sendAttendanceReport","sendBriefingReport","sendWelcomeAssociate","sendWelcomeMember","sendWelcomeGuest","sendReferringAssociate","clearAll","row","rows","subject","sendMessage","associates","members","guests","referredMessageSent","referredByEmail","sender","request","encodeURI","status","currentUser","getAuthResponse","access_token","Splash","AuthService","authenticated","baseUrl","loginRoute","loginRedirect","initialUrl","getBaseUrl","setBaseUrl","getLoginRoute","setLoginRoute","getLoginRedirect","setLoginRedirect","setInitialUrl","authenticate","userName","password","logout","AuthorizeStep","run","routingContext","isLoggedIn","getAllInstructions","some","window","location","href","cancel","fragment","globalResources","BottomNav","TopNav","AttendeeUpdated","contains","other","CheckIn","RecipientsUpdated","SettingUpdated","setting","SettingsUpdated","nprogress","LoadingIndicator","defaultValue","on","loadingChanged","newValue","done","AltBootstrapFormRenderer","render","instruction","unrender","elements","element","remove","add","formGroup","closest","classList","document","createElement","className","textContent","appendChild","querySelector","removeChild","querySelectorAll","BootstrapFormRenderer","AuthFilterValueConverter","toView","routes","r","undefined","DateFormatValueConverter","KeysValueConverter","Reflect","ownKeys"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {inject} from \"aurelia-framework\";\nimport {AuthorizeStep} from \"services/authorize-step\";\nimport {AuthService} from \"services/auth-service\";\nimport {WebAPI} from \"web-api\";\n\n@inject(AuthService, WebAPI)\nexport class App {\n  constructor(authService, webApi) {\n    this.authService = authService;\n    this.webApi = webApi;\n  }\n\n  get isAuthenticated() {\n    return this.authService.isAuthenticated();\n  }\n\n  configureRouter(config, router) {\n    config.title = 'Registration App';\n    // config.addPipelineStep('authorize', AuthorizeStep);\n    config.map([\n      {\n        route: '',\n        moduleId: 'pages/lookup',\n        title: 'Lookup',\n        name: 'lookup',\n        auth: true\n      },\n      {\n        route: 'registration',\n        moduleId: 'pages/registration',\n        title: 'Registration',\n        name: 'settings',\n        auth: true\n      },\n      {\n        route: 'registration/:id',\n        moduleId: 'pages/registration',\n        title: 'Registration',\n        name: 'settings',\n        auth: true\n      },\n      {\n        route: 'splash/:id',\n        moduleId: 'pages/splash',\n        title: 'Finish',\n        name: 'splash',\n        auth: true\n      },\n      {\n        route: 'reports',\n        moduleId: 'pages/reports',\n        title: 'Reports',\n        name: 'reports',\n        auth: true\n      },\n      {\n        route: 'settings',\n        moduleId: 'pages/settings',\n        title: 'Settings',\n        name: 'settings',\n        auth: true\n      },\n      {\n        route: 'lookup',\n        moduleId: 'pages/lookup',\n        title: 'Lookup',\n        name: 'lookup',\n        auth: true\n      },\n      {\n        route: 'gmail',\n        moduleId: 'pages/gmail',\n        title: 'GMail',\n        name: 'gmail',\n        auth: true\n      }\n    ]);\n\n    this.router = router;\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import {WebAPI} from \"web-api\";\nimport {inject} from \"aurelia-framework\";\n\n@inject(WebAPI)\nexport class Index {\n  constructor(webApi) {\n    this.message = 'Registration Demo';\n    this.webApi = webApi;\n  }\n\n  created() {\n  }\n}\n","import environment from \"./environment\";\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources')\n    .plugin('aurelia-validation');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function areEqual(obj1, obj2) {\n\treturn Object.keys(obj1).every((key) => obj2.hasOwnProperty(key) && (obj1[key] === obj2[key]));\n}\n\nexport function clone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n","import {AttendeeUpdated} from \"model/events/attendee-updated\";\nimport {CheckIn} from \"model/events/check-in\";\nimport {RecipientsUpdated} from \"model/events/recipients-updated\";\nimport {SettingsUpdated} from \"model/events/settings-updated\";\nimport {clone} from \"utility\";\nimport {EventAggregator} from \"aurelia-event-aggregator\";\nimport {inject} from \"aurelia-framework\";\n\nlet latency = 100;\nlet id = localStorage.getItem('id');\n\nfunction getId(){\n  let next = ++id;\n  localStorage.setItem('id', next);\n  return next;\n}\n\nlet navItems = [\n];\n\nlet menuItems = [\n  // {\n  //   icon: 'user',\n  //   title: 'Lookup Attendee',\n  //   route: 'lookup',\n  //   showTitle: true\n  // },\n  // {\n  //   icon: 'list-alt',\n  //   title: 'Registration',\n  //   route: 'registration',\n  //   showTitle: true\n  // },\n  {\n    icon: 'stats',\n    title: 'Reports',\n    route: 'reports',\n    showTitle: true\n  },\n  {\n    icon: 'cog',\n    title: 'Settings',\n    route: 'settings',\n    showTitle: true\n  }\n];\n\nlet settings = JSON.parse(localStorage.getItem('settings'));\nif (!settings) {\n  settings = {};\n\n  console.log('Loading default settings...');\n\n  /*\n   * Initialize default settings that we don't want to set every time.\n   * TODO: Remove hard-coding here and put in separate file.\n   */\n\n  settings['email.sender.address'] = 'mmmm@legalshieldassociates.com';\n\n  settings['email.templates.signature'] = `\nMichael & Marilyn McKee<br />\nRegional Managers<br />\nIndependent Associates<br />\nLegalShield<br />\n402-201-3518\n`;\n\n  settings['email.templates.welcome-guest'] = `\nThank you for attending the Tuesday evening LegalShield Business Opportunity Meeting in Omaha, Nebraska, on {{date}}.<br />\nWe enjoyed informing you, our Guest, on the value of the LegalShield Plan and Opportunity.<br />\nWe hope to see you back soon.<br /><br />\n{{signature}}`;\n  settings['email.templates.welcome-associate'] = `\nWe appreciated your being at the Omaha LegalShield Business Opportunity Meeting.<br />\nWe are always pleased to share the value of the Membership.<br />\nWe hope to see you back at the meeting again soon.<br /><br />\nYou will receive a separate receipt for the $5 you paid to attend.<br />\nThank you.<br /><br />\n{{signature}}`;\n  settings['email.templates.welcome-member'] = `\nWe appreciate your continued support of the Omaha LegalShield Business Opportunity Meeting.<br />\nWe enjoyed your attending on {{date}}.<br /><br />\nIf you have any feedback or suggestions for the meeting, please reply to bring your comments to Michael at the meeting.<br /><br />\nThank you.<br />\nMichael<br /><br />\n{{signature}}`;\n  settings['email.templates.referring-associate'] = `\nWe were happy to have {{firstName}} {{lastName}} at our meeting this week.  Thank you for sending them.  Whether they were a guest or already a LegalShield Associate, we hope they learned all they came for.<br /><br />\nIf we can be of service to you or your Omaha Metro--based Associate in the future, please contact us.  If your referred person become (or is) an Associate, they are welcome at our meeting weekly.<br /><br />\nNow that I have your email address, I will be adding you to a monthly newsletter informing you of local meetings, Super Saturday\\'s and other LS events of interest.<br /><br />\n{{signature}}`;\n  settings['email.templates.briefing-report'] = `\nThis week, we had the following individuals at the Omaha LS Briefing:<br /><br />\n<table>\n  <tr><th>Associates</th><td>{{associates}}</td></tr>\n  <tr><th>Members</th><td>{{members}}</td></tr>\n  <tr><th>Guests</th><td>{{guests}}</td></tr>\n</table>\n<br /><br />\nOur Presenter for the week was:  <br />\nThe Training Topic was:  <br /><br />\n{{signature}}`;\n  settings['email.templates.attendance-report'] = `\nThis week, these people attended the meeting:<br /><br />\n<table>\n  <thead>\n    <tr>\n      <th>Name</th>\n      <th>Status</th>\n      <th>Payment Status</th>\n    </tr>\n  </thead>\n  <tbody>\n    {{rows}}\n  </tbody>\n</table>\n<br /><br />\n{{signature}}`;\n  settings['email.templates.attendance-report-row-template'] = `\n<tr>\n  <td>{{firstName}} {{lastName}}</td>\n  <td>{{status}}</td>\n  <td>{{paymentStatus}}</td>\n</tr>`;\n\n  // fix all the ugly\n  for (let key of Object.keys(settings)) {\n    settings[key] = settings[key].trim();\n  }\n}\n\nlet attendees = JSON.parse(localStorage.getItem('attendees'));\nif (!attendees) {\n  attendees = [];\n}\n\nlet checkIns = JSON.parse(localStorage.getItem('checkIns'));\nif (!checkIns) {\n  checkIns = [];\n}\n\nlet recipients = JSON.parse(localStorage.getItem('recipients'));\nif (!recipients) {\n  recipients = [];\n}\n\n/**\n * Add simulated latency to a fetch.\n *\n * @param webApi The WebAPI instance\n * @param data The stubbed data\n * @returns {Promise} A promise representing the fetch\n */\nfunction delay(webApi, data) {\n  webApi.isRequesting = true;\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(data);\n      webApi.isRequesting = false;\n    }, latency);\n  });\n}\n\nfunction save(value, values) {\n  let instance = clone(value);\n  let found = values.find(x => x.id === instance.id);\n  if (found) {\n    let index = values.indexOf(found);\n    values[index] = instance;\n  } else {\n    instance.id = getId();\n    values.push(instance);\n  }\n\n  return instance;\n}\n\n@inject(EventAggregator)\nexport class WebAPI {\n  isRequesting = false;\n\n  constructor(eventAggregator) {\n    this.eventAggregator = eventAggregator;\n\n    // register subscriber for attendees\n    eventAggregator.subscribe(AttendeeUpdated, event => {\n      localStorage.setItem('attendees', JSON.stringify(attendees));\n    });\n\n    // register subscriber for check-ins\n    eventAggregator.subscribe(CheckIn, event => {\n      checkIns.push({\n        attendeeId: event.attendee.id,\n        date: new Date()\n      });\n      localStorage.setItem('checkIns', JSON.stringify(checkIns));\n    });\n\n    // register subscriber for settings\n    eventAggregator.subscribe(SettingsUpdated, event => {\n      localStorage.setItem('settings', JSON.stringify(event.settings));\n    });\n\n    // register subscriber for recipients\n    eventAggregator.subscribe(RecipientsUpdated, event => {\n      localStorage.setItem('recipients', JSON.stringify(event.recipients));\n    });\n  }\n\n  getNavItems() {\n    return delay(this, navItems);\n  }\n\n  getMenuItems() {\n    return delay(this, menuItems);\n  }\n\n  getAttendees() {\n    return delay(this, attendees);\n  }\n\n  getAttendeesByLastName(lastName) {\n    return this.getAttendees().then(attendees => attendees.filter(x => x.lastName == lastName));\n  }\n\n  getAttendeeById(id) {\n    return this.getAttendees().then(attendees => attendees.find(x => x.id == id));\n  }\n\n  saveAttendee(attendee) {\n    attendee = save(attendee, attendees);\n    this.eventAggregator.publish(new AttendeeUpdated(attendee));\n    return this.getAttendeeById(attendee.id);\n  }\n\n  getCheckIns() {\n    return delay(this, checkIns);\n  }\n\n  saveCheckIn(attendee) {\n    this.eventAggregator.publish(new CheckIn(attendee));\n    return delay(this, attendee);\n  }\n\n  deleteCheckIns() {\n    checkIns = [];\n    localStorage.removeItem('checkIns');\n    return delay(this, checkIns);\n  }\n\n  getSettings() {\n    return delay(this, settings);\n  }\n\n  saveSettings(_settings) {\n    settings = _settings;\n    this.eventAggregator.publish(new SettingsUpdated(settings));\n    return delay(this, settings);\n  }\n\n  getRecipients() {\n    return delay(this, recipients);\n  }\n\n  saveRecipients(_recipients) {\n    recipients = _recipients;\n    this.eventAggregator.publish(new RecipientsUpdated(recipients));\n    return delay(this, recipients);\n  }\n}\n","import {WebAPI} from \"web-api\";\nimport {inject} from \"aurelia-framework\";\n\n// Client ID and API key from the Developer Console\nlet CLIENT_ID = '746369453415-rso20ut2ook4lamuvbhtd731akdi2ncb.apps.googleusercontent.com';\n\n// Array of API discovery doc URLs for APIs used by the quickstart\nlet DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest\"];\n\n// Authorization scopes required by the API; multiple scopes can be\n// included, separated by spaces.\nlet SCOPES = 'https://www.googleapis.com/auth/gmail.readonly';\n\n// let authorizeButton = document.getElementById('authorize-button');\n// let signoutButton = document.getElementById('signout-button');\n\n@inject(WebAPI)\nexport class Gmail {\n  isSignedIn = false;\n  messages = [];\n\n  constructor(webApi) {\n    this.webApi = webApi;\n  }\n\n  created() {\n    this.handleClientLoad();\n  }\n\n  /**\n   *  On load, called to load the auth2 library and API client library.\n   */\n  handleClientLoad() {\n    gapi.load('client:auth2', this.initClient.bind(this));\n  }\n  \n  /**\n   *  Initializes the API client library and sets up sign-in state\n   *  listeners.\n   */\n  initClient() {\n    gapi.client.init({\n      discoveryDocs: DISCOVERY_DOCS,\n      clientId: CLIENT_ID,\n      scope: SCOPES\n    }).then(() => {\n      // Listen for sign-in state changes.\n      gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus.bind(this));\n  \n      // Handle the initial sign-in state.\n      this.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n      // authorizeButton.onclick = handleAuthClick;\n      // signoutButton.onclick = handleSignoutClick;\n    });\n  }\n  \n  /**\n   *  Called when the signed in status changes, to update the UI\n   *  appropriately. After a sign-in, the API is called.\n   */\n  updateSigninStatus(isSignedIn) {\n    this.isSignedIn = isSignedIn;\n    if (isSignedIn) {\n      // authorizeButton.style.display = 'none';\n      // signoutButton.style.display = 'block';\n      this.listLabels();\n    } else {\n      // authorizeButton.style.display = 'block';\n      // signoutButton.style.display = 'none';\n    }\n  }\n  \n  /**\n   *  Sign in the user upon button click.\n   */\n  handleAuthClick() {\n    gapi.auth2.getAuthInstance().signIn();\n  }\n  \n  /**\n   *  Sign out the user upon button click.\n   */\n  handleSignoutClick() {\n    gapi.auth2.getAuthInstance().signOut();\n  }\n  \n  /**\n   * Append a pre element to the body containing the given message\n   * as its text node. Used to display the results of the API call.\n   *\n   * @param {string} message Text to be placed in pre element.\n   */\n  appendPre(message) {\n    // let pre = document.getElementById('content');\n    // let textContent = document.createTextNode(message + '\\n');\n    // pre.appendChild(textContent);\n    this.messages.push(message + '\\n');\n  }\n  \n  /**\n   * Print all Labels in the authorized user's inbox. If no labels\n   * are found an appropriate message is printed.\n   */\n  listLabels() {\n    gapi.client.gmail.users.labels.list({\n      'userId': 'me'\n    }).then(response => {\n      let labels = response.result.labels;\n      this.appendPre('Labels:');\n  \n      if (labels && labels.length > 0) {\n        for (i = 0; i < labels.length; i++) {\n          let label = labels[i];\n          this.appendPre(label.name)\n        }\n      } else {\n        this.appendPre('No Labels found.');\n      }\n    });\n  }\n}\n","import {WebAPI} from \"web-api\";\nimport {inject} from \"aurelia-framework\";\n\n@inject(WebAPI)\nexport class Lookup {\n  lastName = '';\n  attendees = [];\n  showAttendees = false;\n\n  constructor(webApi) {\n    this.webApi = webApi;\n  }\n\n  created() {\n  }\n\n  submit() {\n    this.webApi.getAttendeesByLastName(this.lastName).then(attendees => {\n      this.attendees = attendees;\n      this.showAttendees = true;\n    });\n  }\n\n  reset() {\n    this.lastName = '';\n    this.showAttendees = false;\n  }\n}\n","import {inject} from \"aurelia-framework\";\nimport {Router} from \"aurelia-router\";\nimport {WebAPI} from \"web-api\";\nimport {NewInstance} from \"aurelia-dependency-injection\";\n// import {ValidationRules} from \"aurelia-validatejs\";\nimport {ValidationRules, ValidationController, validateTrigger} from \"aurelia-validation\";\nimport {AltBootstrapFormRenderer} from \"resources/renderers/alt-bootstrap-form-renderer\";\n\n@inject(WebAPI, Router, NewInstance.of(ValidationController))\nexport class Registration {\n  attendee = {};\n\n  constructor(webApi, router, controller) {\n    this.webApi = webApi;\n    this.router = router;\n    this.controller = controller;\n    controller.validateTrigger = validateTrigger.blur;\n    controller.addRenderer(new AltBootstrapFormRenderer());\n\n    this.rules = ValidationRules\n      .ensure('firstName').required()\n      .ensure('lastName').required()\n      .ensure('email').required().email()\n      .ensure('address1').displayName('Street Address').required()\n      .ensure('address2').minLength(1)\n      .ensure('city').required()\n      .ensure('state').required().minLength(2)\n      .ensure('postalCode').required().matches(/\\d{5}/).withMessage('Postal Code must be exactly 5 digits.')\n      .ensure('phone').required().matches(/\\d{3}-\\d{3}-\\d{4}/).withMessage('Phone must be in the format 123-456-7890.')\n      .ensure('sms').required().withMessage('You must select Yes or No.')\n      .ensure('member').required().withMessage('You must select Yes or No.')\n      .ensure('associate').required().withMessage('You must select Yes or No.')\n      .ensure('associateFirstName').minLength(1)\n      .ensure('associateLastName').minLength(1)\n      .ensure('associateEmail').email()\n      .ensure('referred').required().withMessage('You must select Yes or No.')\n      .ensure('referredByFirstName').required().when(attendee => attendee.referred)\n      .ensure('referredByLastName').required().when(attendee => attendee.referred)\n      .ensure('referredByEmail').required().when(attendee => attendee.referred).email()\n      .ensure('referredByCity').minLength(1)\n      .ensure('referredByState').minLength(2)\n      .ensure('referredByPostalCode').matches(/\\d{5}/).withMessage('Referred By Postal Code must be exactly 5 digits.')\n      .ensure('referredByPhone').matches(/\\d{3}-\\d{3}-\\d{4}/).withMessage('Referred By Phone must be in the format 123-456-7890.')\n      .rules;\n  }\n\n  activate(params) {\n    let id = params.id;\n    if (id) {\n      this.webApi.getAttendeeById(id).then(attendee => this.attendee = attendee);\n    } else {\n      this.reset();\n    }\n  }\n\n\n  submit(checkIn) {\n    this.controller.validate()\n      .then(result => {\n        if (result.valid) {\n          this.submitSuccess(checkIn);\n        }\n      });\n  }\n\n  submitSuccess(checkIn) {\n    let attendee = this.attendee;\n    if (checkIn) {\n      attendee.lastAttendedDate = new Date().toDateString();\n      attendee.paid = false;\n\n      // check guest status\n      if (!attendee.associate && !attendee.member) {\n        attendee.paid = true;\n      }\n\n      // check next payment date\n      if (attendee.nextPaymentDate) {\n        let nextPaymentDate = new Date(Date.parse(attendee.nextPaymentDate));\n        if (nextPaymentDate > new Date()) {\n          attendee.paid = true;\n        }\n      }\n\n      // create attendance record\n      if (!attendee.attendance) {\n        attendee.attendance = [];\n      }\n      attendee.attendance.push({\n        date: attendee.lastAttendedDate,\n        paid: false\n      });\n    }\n\n    // save attendee\n    this.webApi.saveAttendee(attendee).then(attendee => {\n      this.attendee = attendee;\n      if (checkIn) {\n        this.webApi.saveCheckIn(attendee);\n        this.router.navigate(`splash/${attendee.id}`);\n      } else {\n        this.router.navigate(`registration/${attendee.id}`);\n      }\n    });\n  }\n\n  detached() {\n    this.reset();\n  }\n\n  reset() {\n    this.attendee = {};\n    this.controller.reset();\n  }\n}\n\n","import {WebAPI} from \"web-api\";\nimport {inject} from \"aurelia-framework\";\nimport {Router} from \"aurelia-router\";\n\nconst ONE_DAY_MILLIS = 1000 * 60 * 60 * 24;\n\n@inject(WebAPI, Router)\nexport class Reports {\n  attendees = [];\n  checkIns = [];\n\n  constructor(webApi, router) {\n    this.webApi = webApi;\n    this.router = router;\n  }\n\n  setPaid(attendeeId, numDays) {\n    this.webApi.getAttendeeById(attendeeId).then(attendee => {\n      attendee.paid = true;\n\n      let nextPaymentDate = null;\n      if (attendee.nextPaymentDate) {\n        nextPaymentDate = new Date(Date.parse(attendee.nextPaymentDate));\n      }\n\n      // catch up\n      if (nextPaymentDate == null || nextPaymentDate < new Date()) {\n        nextPaymentDate = new Date();\n      }\n\n      attendee.nextPaymentDate = new Date(nextPaymentDate.getTime() + numDays * ONE_DAY_MILLIS).toDateString();\n      this.webApi.saveAttendee(attendee).then(attendee => this.router.navigate(`splash/${attendee.id}`));\n    });\n  }\n\n  created() {\n    this.webApi.getAttendees()\n      .then(attendees => this.attendees = attendees)\n      .then(() => {\n        this.webApi.getCheckIns().then(checkIns => {\n          this.checkIns = checkIns;\n          for (let checkIn of this.checkIns) {\n            checkIn.attendee = this.attendees.find(attendee => attendee.id == checkIn.attendeeId);\n          }\n        });\n      });\n\n  }\n}\n","import {inject} from \"aurelia-framework\";\nimport {WebAPI} from \"web-api\";\nimport {Base64} from \"js-base64\";\nimport moment from \"moment\";\n\nfunction _split(s) {\n  return s.split('@');\n}\n\nfunction _join(ar) {\n  return `${ar[0]}@${ar[1]}`;\n}\n\n// Client ID and API key from the Developer Console\nlet CLIENT_ID = '746369453415-rso20ut2ook4lamuvbhtd731akdi2ncb.apps.googleusercontent.com';\n\n// Array of API discovery doc URLs for APIs used by the quickstart\nlet DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest\"];\n\n// Authorization scopes required by the API; multiple scopes can be\n// included, separated by spaces.\nlet SCOPES = 'https://www.googleapis.com/auth/gmail.compose https://www.googleapis.com/auth/gmail.send';\n\nfunction today() {\n  return moment(new Date()).format('dddd, MMM D, YYYY');\n}\n\nfunction getStatus(attendee) {\n  return attendee.associate\n    ? 'Associate'\n    : attendee.member\n      ? 'Member'\n      : 'Guest';\n}\n\nfunction getPaymentStatus(attendee) {\n  return attendee.paid ? 'Paid' : 'Unpaid';\n}\n\nfunction formatMessage(attendee, settings, templateKey) {\n  let signature = settings['email.templates.signature'];\n  let template = settings[templateKey];\n  return template\n    .replace('{{date}}', today())\n    .replace('{{firstName}}', attendee.firstName)\n    .replace('{{lastName}}', attendee.lastName)\n    .replace('{{status}}', getStatus(attendee))\n    .replace('{{paymentStatus}}', getPaymentStatus(attendee))\n    .replace('{{signature}}', signature);\n}\n\n@inject(WebAPI)\nexport class Settings {\n  recipients = [];\n  settings = {};\n  checkIns = [];\n  attendees = [];\n\n  isSignedIn = false;\n  accessToken = null;\n\n  constructor(webApi) {\n    this.webApi = webApi;\n  }\n\n  created() {\n    this.webApi.getRecipients().then(recipients => this.recipients = recipients.map(_split));\n    this.webApi.getSettings().then(settings => this.settings = settings);\n    this.webApi.getCheckIns().then(checkIns => this.checkIns = checkIns);\n    this.webApi.getAttendees().then(attendees => this.attendees = attendees);\n    this.handleClientLoad();\n  }\n\n  save() {\n    this.webApi.saveRecipients(\n      this.recipients\n        .map(_join)\n        .filter(recipient => /\\S+[@]\\S+[.]\\S+/.test(recipient))\n    ).then(recipients => this.recipients = recipients.map(_split));\n    this.webApi.saveSettings(this.settings);\n  }\n\n  addRecipient() {\n    this.recipients.push(['', '']);\n  }\n\n  deleteRecipient(p1, p2) {\n    let _recipient = _join([p1, p2]);\n    this.webApi.saveRecipients(\n      this.recipients\n        .map(_join)\n        .filter(recipient => recipient !== _recipient)\n    ).then(recipients => this.recipients = recipients.map(_split));\n    return false;\n  }\n\n  getRecipients() {\n    return this.recipients\n      .map(_join)\n      .map(recipient => `<${recipient}>`)\n      .join(', ');\n  }\n\n  findAttendee(attendeeId) {\n    return this.attendees.find(attendee => attendee.id == attendeeId);\n  }\n\n  sendAll() {\n    if (this.isSignedIn) {\n      this.webApi.isRequesting = true;\n      this.sendAttendanceReport();\n      this.sendBriefingReport();\n      this.sendWelcomeAssociate();\n      this.sendWelcomeMember();\n      this.sendWelcomeGuest();\n      this.sendReferringAssociate();\n      this.clearAll();\n    }\n  }\n\n  clearAll() {\n    this.webApi.deleteCheckIns();\n  }\n\n  sendAttendanceReport() {\n    let recipients = this.getRecipients();\n    let settings = this.settings;\n    let signature = settings['email.templates.signature'];\n    let row = settings['email.templates.attendance-report-row-template'];\n    let rows = '';\n    for (let checkIn of this.checkIns) {\n      let attendee = this.findAttendee(checkIn.attendeeId);\n      rows += row\n        .replace('{{date}}', today())\n        .replace('{{firstName}}', attendee.firstName)\n        .replace('{{lastName}}', attendee.lastName)\n        .replace('{{status}}', getStatus(attendee))\n        .replace('{{paymentStatus}}', getPaymentStatus(attendee));\n    }\n\n    let subject = 'Weekly Attendance - Omaha LegalShield Meeting';\n    let message = settings['email.templates.attendance-report']\n      .replace('{{rows}}', rows)\n      .replace('{{signature}}', signature);\n    this.sendMessage(recipients, subject, message);\n  }\n\n  sendBriefingReport() {\n    let recipients = this.getRecipients();\n    let settings = this.settings;\n    let signature = settings['email.templates.signature'];\n    let associates = 0, members = 0, guests = 0;\n    for (let checkIn of this.checkIns) {\n      let attendee = this.findAttendee(checkIn.attendeeId);\n      if (attendee.associate) {\n        associates++;\n      } else if (attendee.member) {\n        members++\n      } else {\n        guests++;\n      }\n    }\n\n    let subject = 'Stats from this weeks Omaha LS Briefing';\n    let message = settings['email.templates.briefing-report']\n      .replace('{{date}}', today())\n      .replace('{{associates}}', associates)\n      .replace('{{members}}', members)\n      .replace('{{guests}}', guests)\n      .replace('{{signature}}', signature);\n    this.sendMessage(recipients, subject, message);\n  }\n\n  sendWelcomeAssociate() {\n    let settings = this.settings;\n    let signature = settings['email.templates.signature'];\n    let subject = 'Omaha LegalShield Business Opportunity Meeting';\n    for (let checkIn of this.checkIns) {\n      let attendee = this.findAttendee(checkIn.attendeeId);\n      if (attendee.associate) {\n        let message = formatMessage(attendee, settings, 'email.templates.welcome-associate');\n        this.sendMessage(`<${attendee.email}>`, subject, message);\n      }\n    }\n  }\n\n  sendWelcomeMember() {\n    let settings = this.settings;\n    let signature = settings['email.templates.signature'];\n    let subject = 'Omaha LegalShield Business Opportunity Meeting';\n    for (let checkIn of this.checkIns) {\n      let attendee = this.findAttendee(checkIn.attendeeId);\n      if (!attendee.associate && attendee.member) {\n        let message = formatMessage(attendee, settings, 'email.templates.welcome-member');\n        this.sendMessage(`<${attendee.email}>`, subject, message);\n      }\n    }\n  }\n\n  sendWelcomeGuest() {\n    let settings = this.settings;\n    let signature = settings['email.templates.signature'];\n    let subject = 'Omaha LegalShield Business Opportunity Meeting';\n    for (let checkIn of this.checkIns) {\n      let attendee = this.findAttendee(checkIn.attendeeId);\n      if (!attendee.associate && !attendee.member) {\n        let message = formatMessage(attendee, settings, 'email.templates.welcome-guest');\n        this.sendMessage(`<${attendee.email}>`, subject, message);\n      }\n    }\n  }\n\n  sendReferringAssociate() {\n    let settings = this.settings;\n    let signature = settings['email.templates.signature'];\n    let subject = 'Omaha LegalShield Business Opportunity Meeting';\n    for (let checkIn of this.checkIns) {\n      let attendee = this.findAttendee(checkIn.attendeeId);\n      if (attendee.referred && !attendee.referredMessageSent) {\n        let signature = settings['email.templates.signature'];\n        let template = settings['email.templates.referring-associate'];\n        let message = formatMessage(attendee, settings, 'email.templates.referring-associate');\n        this.sendMessage(`<${attendee.referredByEmail}>`, subject, message);\n\n        // update attendee to suppress further messages to this referrer\n        attendee.referredMessageSent = true;\n        this.webApi.saveAttendee(attendee);\n      }\n    }\n  }\n\n  sendMessage(recipients, subject, message) {\n    let settings = this.settings;\n    let sender = `\"Admin\" <${settings['email.sender.address']}>`;\n    let id = moment(new Date()).format('hhmmssSSS.DD-MMM-YYYY');\n    let date = moment(new Date()).format('ddd, D MMM YYYY HH:mm:ss ZZ');\n    let email = `\nFrom: ${sender}\nTo: ${recipients}\nSubject: ${subject}\nDate: ${date}\nMessage-ID: <${id}@legalshieldassociates.com>\nContent-Type: multipart/alternative; boundary=${id}\n\n--${id}\nContent-Type: text/plain; charset=UTF-8\n\nYou can't view the HTML message.\n\n--${id}\nContent-Type: text/html; charset=UTF-8\nContent-Transfer-Encoding: quoted-printable\n\n${message}\n`\n      .trim();\n    gapi.client.request({\n      'path': '/gmail/v1/users/me/messages/send?alt=json',\n      'method': 'POST',\n      'params': {},\n      'headers': {},\n      'body': {\n        'raw': Base64.encodeURI(email)\n      }\n    })\n      .then(response => {\n        if (response.status !== 200) {\n          console.log(response);\n        }\n      });\n  }\n\n  /**\n   *  On load, called to load the auth2 library and API client library.\n   */\n  handleClientLoad() {\n    gapi.load('client:auth2', this.initClient.bind(this));\n  }\n\n  /**\n   *  Initializes the API client library and sets up sign-in state\n   *  listeners.\n   */\n  initClient() {\n    gapi.client.init({\n      discoveryDocs: DISCOVERY_DOCS,\n      clientId: CLIENT_ID,\n      scope: SCOPES\n    }).then(() => {\n      // Listen for sign-in state changes.\n      gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus.bind(this));\n\n      // Handle the initial sign-in state.\n      this.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n    });\n  }\n\n  /**\n   *  Called when the signed in status changes, to update the UI\n   *  appropriately. After a sign-in, the API is called.\n   */\n  updateSigninStatus(isSignedIn) {\n    this.isSignedIn = isSignedIn;\n    let currentUser = gapi.auth2.getAuthInstance().currentUser.get();\n    this.accessToken = currentUser.getAuthResponse(true).access_token;\n  }\n\n  /**\n   *  Sign in the user upon button click.\n   */\n  handleAuthClick() {\n    gapi.auth2.getAuthInstance().signIn();\n  }\n\n  /**\n   *  Sign out the user upon button click.\n   */\n  handleSignoutClick() {\n    gapi.auth2.getAuthInstance().signOut();\n  }\n}\n","import {WebAPI} from \"web-api\";\nimport {inject} from \"aurelia-framework\";\n\n@inject(WebAPI)\nexport class Splash {\n  attendee = {};\n\n  constructor(webApi) {\n    this.webApi = webApi;\n  }\n\n  activate(params) {\n    let id = params.id;\n    this.webApi.getAttendeeById(id).then(attendee => this.attendee = attendee);\n  }\n\n  reset() {\n    this.attendee = {};\n  }\n}\n","export class AuthService {\n  authenticated = false;\n  baseUrl = '/';\n  loginRoute = '/login';\n  loginRedirect = '#/';\n  initialUrl = '';\n\n  isAuthenticated() {\n    return this.authenticated;\n  }\n\n  getBaseUrl() {\n    return this.baseUrl;\n  }\n\n  setBaseUrl(baseUrl) {\n    this.baseUrl = baseUrl;\n  }\n\n  getLoginRoute() {\n    return this.loginRoute;\n  }\n\n  setLoginRoute(loginRoute) {\n    this.loginRoute = loginRoute;\n  }\n\n  getLoginRedirect() {\n    return this.initialUrl || this.loginRedirect;\n  }\n\n  setLoginRedirect(loginRedirect) {\n    this.loginRedirect = loginRedirect;\n  }\n\n  setInitialUrl(initialUrl) {\n    this.initialUrl = initialUrl;\n  }\n\n  authenticate(userName, password) {\n    return new Promise(resolve => {\n      this.authenticated = true;\n\n      // TODO: Design how this promise works...\n      resolve();\n    });\n  }\n\n  logout() {\n    return new Promise(resolve => {\n      this.authenticated = false;\n      this.initialUrl = '';\n      resolve();\n    })\n  }\n}\n","import {inject} from \"aurelia-dependency-injection\";\nimport {Redirect} from \"aurelia-router\";\nimport {AuthService} from \"services/auth-service\";\n\n@inject(AuthService)\nexport class AuthorizeStep {\n  constructor(authService) {\n    this.authService = authService;\n  }\n\n  run(routingContext, next) {\n    let isLoggedIn = this.authService.isAuthenticated();\n    let loginRoute = this.authService.getLoginRoute();\n\n    if (routingContext.getAllInstructions().some(i => i.config.auth)) {\n      if (!isLoggedIn) {\n        this.authService.setInitialUrl(window.location.href);\n        return next.cancel(new Redirect(loginRoute));\n      }\n    } else if (isLoggedIn && routingContext.getAllInstructions().some(i => i.fragment === loginRoute)) {\n      let loginRedirect = this.authService.getLoginRedirect();\n      return next.cancel(new Redirect(loginRedirect));\n    }\n\n    return next();\n  }\n}\n","export function configure(config) {\n  config.globalResources([\n    './elements/loading-indicator',\n    './value-converters/keys-value-converter',\n    './value-converters/auth-filter-value-converter'\n  ]);\n}\n","import {Aurelia, inject} from \"aurelia-framework\";\nimport {WebAPI} from \"web-api\";\n\n@inject(Aurelia, WebAPI)\nexport class BottomNav {\n  constructor(aurelia, webApi) {\n    this.aurelia = aurelia;\n    this.webApi = webApi;\n  }\n\n  created() {\n  }\n}\n","import {Aurelia, inject} from \"aurelia-framework\";\nimport {AuthService} from \"services/auth-service\";\nimport {Router} from \"aurelia-router\";\nimport {WebAPI} from \"web-api\";\n\n@inject(Aurelia, AuthService, Router, WebAPI)\nexport class TopNav {\n  constructor(aurelia, authService, router, webApi) {\n    this.aurelia = aurelia;\n    this.authService = authService;\n    this.router = router;\n    this.webApi = webApi;\n  }\n\n  get isAuthenticated() {\n    return this.authService.isAuthenticated();\n  }\n\n  logout() {\n    this.authService.logout().then(() => {\n      this.router.navigate('login');\n    });\n  }\n\n  created() {\n    this.webApi.getMenuItems().then(menuItems => this.menuItems = menuItems);\n  }\n}\n","export class AttendeeUpdated {\n  constructor(attendee) {\n    this.attendee = attendee;\n  }\n\n  contains(other) {\n    return this.attendee.id == other.id;\n  }\n}\n","export class CheckIn {\n  constructor(attendee) {\n    this.attendee = attendee;\n  }\n\n  contains(other) {\n    return this.attendee.id == other.id;\n  }\n}\n","export class RecipientsUpdated {\n  constructor(recipients) {\n    this.recipients = recipients;\n  }\n}\n","export class SettingUpdated {\n  constructor(setting) {\n    this.setting = setting;\n  }\n\n  contains(other) {\n    return this.setting.id == other.id;\n  }\n}\n","export class SettingsUpdated {\n  constructor(settings) {\n    this.settings = settings;\n  }\n}\n","import * as nprogress from \"nprogress\";\nimport {bindable, noView, decorators} from \"aurelia-framework\";\n\nexport let LoadingIndicator = decorators(\n  noView(['nprogress/nprogress.css']),\n  bindable({name: 'loading', defaultValue: false})\n).on(class {\n  loadingChanged(newValue){\n    if (newValue) {\n      nprogress.start();\n    } else {\n      nprogress.done();\n    }\n  }\n});\n","export class AltBootstrapFormRenderer {\n  render(instruction) {\n    for (let { result, elements } of instruction.unrender) {\n      for (let element of elements) {\n        this.remove(element, result);\n      }\n    }\n\n    for (let { result, elements } of instruction.render) {\n      for (let element of elements) {\n        this.add(element, result);\n      }\n    }\n  }\n\n  add(element, result) {\n    if (result.valid) {\n      return;\n    }\n\n    const formGroup = element.closest('.form-group');\n    if (!formGroup) {\n      return;\n    }\n\n    // add the has-error class to the enclosing form-group div\n    formGroup.classList.add('has-error');\n\n    // add help-block\n    const message = document.createElement('span');\n    message.className = 'help-block validation-message';\n    message.textContent = result.message;\n    message.id = `validation-message-${result.id}`;\n    formGroup.appendChild(message);\n  }\n\n  remove(element, result) {\n    if (result.valid) {\n      return;\n    }\n\n    const formGroup = element.closest('.form-group');\n    if (!formGroup) {\n      return;\n    }\n\n    // remove help-block\n    const message = formGroup.querySelector(`#validation-message-${result.id}`);\n    if (message) {\n      formGroup.removeChild(message);\n\n      // remove the has-error class from the enclosing form-group div\n      if (formGroup.querySelectorAll('.help-block.validation-message').length === 0) {\n        formGroup.classList.remove('has-error');\n      }\n    }\n  }\n}","export class BootstrapFormRenderer {\n  render(instruction) {\n    for (let { result, elements } of instruction.unrender) {\n      for (let element of elements) {\n        this.remove(element, result);\n      }\n    }\n\n    for (let { result, elements } of instruction.render) {\n      for (let element of elements) {\n        this.add(element, result);\n      }\n    }\n  }\n\n  add(element, result) {\n    const formGroup = element.closest('.form-group');\n    if (!formGroup) {\n      return;\n    }\n\n    if (result.valid) {\n      if (!formGroup.classList.contains('has-error')) {\n        formGroup.classList.add('has-success');\n      }\n    } else {\n      // add the has-error class to the enclosing form-group div\n      formGroup.classList.remove('has-success');\n      formGroup.classList.add('has-error');\n\n      // add help-block\n      const message = document.createElement('span');\n      message.className = 'help-block validation-message';\n      message.textContent = result.message;\n      message.id = `validation-message-${result.id}`;\n      formGroup.appendChild(message);\n    }\n  }\n\n  remove(element, result) {\n    const formGroup = element.closest('.form-group');\n    if (!formGroup) {\n      return;\n    }\n\n    if (result.valid) {\n      if (formGroup.classList.contains('has-success')) {\n        formGroup.classList.remove('has-success');\n      }\n    } else {\n      // remove help-block\n      const message = formGroup.querySelector(`#validation-message-${result.id}`);\n      if (message) {\n        formGroup.removeChild(message);\n\n        // remove the has-error class from the enclosing form-group div\n        if (formGroup.querySelectorAll('.help-block.validation-message').length === 0) {\n          formGroup.classList.remove('has-error');\n        }\n      }\n    }\n  }\n}","export class AuthFilterValueConverter {\n  toView(routes, isAuthenticated) {\n    return routes.filter(r => r.config.auth === undefined || r.config.auth === isAuthenticated);\n  }\n}\n","import moment from 'moment';\n\nexport class DateFormatValueConverter {\n  toView(value) {\n    return moment(value).format('MMMM Do YYYY, h:mm:ss a');\n  }\n}\n","export class KeysValueConverter {\n  toView(obj) {\n    return Reflect.ownKeys(obj);\n  }\n}\n","//@import \"node_modules/bootswatch/journal/variables\";\n//@import \"node_modules/bootstrap-sass/assets/stylesheets/bootstrap\";\n//@import \"node_modules/bootswatch/journal/bootswatch\";\n\n/* Global styles. */\n\nbody {\n  padding-top: 70px;\n  padding-bottom: 70px;\n}\n\n/* Element styles. */\n\n#nprogress .spinner {\n  top: 60px !important;\n}\n\n.navbar-brand {\n  padding: 0;\n}\n\n.navbar-fixed-bottom {\n  p {\n    margin: 0;\n    line-height: 70px;\n  }\n}\n\n.rounded-corners {\n  border-radius: 3px;\n}\n\n.text-larger {\n  font-size: larger;\n}\n\n.form-group.required .control-label:after {\n  color: #d00;\n  content: \" *\";\n}\n"],"sourceRoot":".."}